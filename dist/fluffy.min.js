(function(){"use strict";function t(t,e){return e="undefined"!=typeof e?e:"debug",t=null==t?[]:Array.isArray(t)?t:[t],A.console&&console[e]?([].forEach.call(t,function(t){}),!0):!0}function e(t,e){function i(){r.value=A.requestAnimationFrame(i);var o=Date.now(),s=o-n;s>=e&&(t.call(),n=Date.now())}var n=Date.now(),r={};return r.value=A.requestAnimationFrame(i),r}function i(t){A.cancelAnimationFrame(t.value)}function n(t){for(var e=0;e<t.length;e++){var i=t[e],n=i.nextSibling,r=i.previousSibling,o=i.parentNode;null!==i&&3===i.nodeType&&o.removeChild(i),null!==r&&3===r.nodeType&&o.removeChild(r),null!==n&&3===n.nodeType&&o.removeChild(n)}return t}function r(){var e=document.querySelectorAll("[data-fluffy-container]");if(null===e)throw Error("No containers found.");for(var i=0;i<e.length;i++){var r,o=e[i].querySelector("[data-fluffy-content]");if(null!==o){var s=B;if(e[i].hasAttribute("data-fluffy-options"))try{var l=JSON.parse(e[i].getAttribute("data-fluffy-options"));Object.keys(l).forEach(function(t){void 0!==s[t]&&(s[t]=l[t])})}catch(c){t("'"+a(e[i])+"' has invalid options and therefore will be ignored.","warn")}L.push({container:e[i],content:o,items:n(o.childNodes),trigger:s.triggerSelector&&null!==(r=document.querySelector(s.triggerSelector))?r:e[i],scrollbars:null,mouse:{real:{x:0,y:0},fake:{x:0,y:0},last:{x:0,y:0},observer:null},ratios:{},settings:s,sizes:{}})}else t("'"+a(e[i])+"' has no content and therefore will be ignored.","warn")}}function o(){L.forEach(function(t){s(t),t.container.style.overflow="hidden",E&&(t.container.style.webkitOverflowScrolling="touch",t.container.style.overflowX=t.settings.triggerDirection.indexOf("x")>=0?"scroll":"hidden",t.container.style.overflowY=t.settings.triggerDirection.indexOf("y")>=0?"scroll":"hidden")})}function s(t){if(t.settings.showScrollbars){var e=t.scrollbars=[];t.settings.triggerDirection.indexOf("x")>=0&&e.push("horizontal"),t.settings.triggerDirection.indexOf("y")>=0&&e.push("vertical");var i=document.createElement("div");i.setAttribute("data-fluffy-scrollbars",""),e.forEach(function(e){var n=document.createElement("span");n.classList.add("is-"+e),i.appendChild(n),t.scrollbars[e]=n}),t.container.appendChild(i),t.container.classList.add("has-scrollbar")}}function a(t){var e=[];do{var i=t.tagName.toLowerCase();t.id&&(i+="#"+t.id),t.className&&(i+="."+[].join.call(t.classList,".")),e.push(i)}while(t=t.parentElement);return e.reverse().join("/")}function l(t){return t.container.getBoundingClientRect().width}function c(t){return t.container.getBoundingClientRect().height}function h(t){return t.trigger.getBoundingClientRect().width}function u(t){return t.trigger.getBoundingClientRect().height}function g(t){for(var e=0,i=0;e<t.items.length;e++)i+=t.items[e].getBoundingClientRect().width;return i}function d(t){for(var e=0,i=0;e<t.items.length;e++)i+=t.items[e].getBoundingClientRect().height;return i}function f(t,e){for(var i,t="height"===t?"height":"width",n=e.items[0].getBoundingClientRect()[t],r=0,o=0,s=0;s<e.items.length;s++)i=e.items[s].getBoundingClientRect(),o+=i[t],i[t]>r&&(r=i[t]),i[t]<n&&(n=i[t]);return[n,o/e.items.length,r]}function m(t){return d(t)-c(t)}function v(t){return g(t)-l(t)}function b(t,e){t=t||A.event;var i=e.trigger.currentStyle||A.getComputedStyle(e.trigger,null),n=e.trigger.getBoundingClientRect(),r={left:0|i.borderLeftWidth,right:0|i.borderRightWidth,top:0|i.borderTopWidth,bottom:0|i.borderBottomWidth},o={left:n.left+r.left,right:r.left+r.right,bottom:r.top+r.bottom,top:n.top+r.top};return{x:Math.min(Math.max(0,t.clientX-o.left),n.width-o.right),y:Math.min(Math.max(0,t.clientY-o.top),n.height-o.bottom)}}function y(t){return{x:Math.min(Math.max(0,t.mouse.real.x-t.settings.mousePadding),t.sizes.moveArea.width)*t.ratios.moveAreaToContent.width,y:Math.min(Math.max(0,t.mouse.real.y-t.settings.mousePadding),t.sizes.moveArea.height)*t.ratios.moveAreaToContent.height}}function w(t){t.sizes={container:{width:l(t),height:c(t)},content:{width:g(t),height:d(t)},scrollable:{width:v(t),height:m(t)},trigger:{width:h(t),height:u(t)},moveArea:{width:h(t)-2*t.settings.mousePadding,height:u(t)-2*t.settings.mousePadding},scrollbars:{width:null,height:null}},t.settings.showScrollbars&&(t.scrollbars.horizontal&&(t.sizes.scrollbars.horizontal=t.scrollbars.horizontal.getBoundingClientRect()),t.scrollbars.vertical&&(t.sizes.scrollbars.vertical=t.scrollbars.vertical.getBoundingClientRect()))}function p(t){t.settings.smartWidth&&D.indexOf(t.settings.smartWidth)>=0?t.content.style.width=f("width",t)[D.indexOf(t.settings.smartWidth)]+"px":t.settings.triggerDirection.indexOf("x")>=0&&(t.content.style.width=100*t.ratios.containerToContent.width+"%"),t.settings.smartHeight&&D.indexOf(t.settings.smartHeight)>=0?t.content.style.height=f("height",t)[D.indexOf(t.settings.smartHeight)]+"px":t.settings.triggerDirection.indexOf("y")>=0&&(t.content.style.height=100*t.ratios.containerToContent.height+"%")}function x(t){var e=t.settings.triggerDirection.indexOf("x")>=0?-t.mouse.last.x/t.sizes.scrollable.width*t.ratios.contentToScrollableArea.width*100:0,i=t.settings.triggerDirection.indexOf("y")>=0?-t.mouse.last.y/t.sizes.scrollable.height*t.ratios.contentToScrollableArea.height*100:0;t.content.style[O]="translate("+e+"%, "+i+"%)"}function z(t){t.settings.showScrollbars&&(t.settings.triggerDirection.indexOf("x")>=0&&(t.scrollbars.horizontal.style.left=t.mouse.last.x/t.sizes.scrollable.width*(1-t.sizes.scrollbars.horizontal.width/t.sizes.container.width)*100+"%"),t.settings.triggerDirection.indexOf("y")>=0&&(t.scrollbars.vertical.style.top=t.mouse.last.y/t.sizes.scrollable.height*(1-t.sizes.scrollbars.vertical.height/t.sizes.container.height)*100+"%"))}function C(t){t.ratios.moveAreaToContent={width:t.sizes.scrollable.width/t.sizes.moveArea.width,height:t.sizes.scrollable.height/t.sizes.moveArea.height},t.ratios.contentToScrollableArea={width:t.sizes.scrollable.width/t.sizes.content.width,height:t.sizes.scrollable.height/t.sizes.content.height},t.ratios.containerToContent={width:t.sizes.content.width/t.sizes.container.width,height:t.sizes.content.height/t.sizes.container.height}}function S(){A.addEventListener("load",function(){L.forEach(function(t){t.container&&t.container.classList.add("is-ready"),w(t),C(t),p(t),E||t.trigger.addEventListener("mousemove",function(e){null===R.status(t)&&R.start(t),t.mouse.real=b(e,t),t.mouse.fake=y(t)})})});var t;A.addEventListener("resize",function(){t&&clearTimeout(t),t=setTimeout(function(){L.forEach(function(t){w(t),C(t),p(t)})},100)})}var A;A="object"==typeof exports?exports:this,A.Fluffy={},Fluffy.version="2.0.0";var T=!!document.querySelector&&!!A.addEventListener&&!!A.requestAnimationFrame,E="ontouchstart"in A,O="transform",D=["smallest","average","largest"],B={triggerSelector:null,showScrollbars:!0,smartHeight:!1,smartWidth:!1,triggerDirection:"x",mouseDamp:20,mousePadding:60},L=[];!function(){try{if(!T)throw Error("Browser is lacking support for several requirements like: 'querySelector', 'addEventListener' or 'requestAnimationFrame'.");O=function(t){for(var e=document.createElement("div"),i=0;i<t.length;i++)if("undefined"!=typeof e.style[t[i]])return t[i];throw Error("Browser doesn't support CSS3 transforms.")}(["transform","msTransform","MozTransform","WebkitTransform","OTransform"]),r()}catch(e){return t(e.message,"error")}o(),S()}();var R={start:function(t){t.container.classList.add("is-moving"),t.mouse.observer=e(function(){var e={x:(t.mouse.fake.x-t.mouse.last.x)/t.settings.mouseDamp,y:(t.mouse.fake.y-t.mouse.last.y)/t.settings.mouseDamp};R.status(t)&&Math.abs(e.x)<.001&&Math.abs(e.y)<.001&&(R.stop(t),t.container.classList.remove("is-moving")),t.mouse.last.x+=e.x,t.mouse.last.y+=e.y,x(t),t.settings.showScrollbars&&z(t)},10)},stop:function(t){i(t.mouse.observer),t.mouse.observer=null},status:function(t){return t.mouse.observer}}}).call(this);